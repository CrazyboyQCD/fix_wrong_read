{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "rust: cargo build",
            "type": "cargo",
            "command": "build",
            "args": [
                "--release",
                "--lib"
            ],
            "problemMatcher": [
                "$rustc"
            ],
            "options": {
                "env": {}
            }
        },
        {
            "label": "rust: cargo build example winit",
            "type": "cargo",
            "command": "build",
            "args": [
                "--package",
                "mdanceio",
                "--example",
                "winit_app",
                "--release"
            ],
            "problemMatcher": [
                "$rustc"
            ],
            "options": {
                "env": {}
            }
        },
        {
            "label": "rust: cargo build-wasm",
            "type": "cargo",
            "command": "build",
            "args": [
                "--no-default-features",
                "--target",
                "wasm32-unknown-unknown",
                "--lib"
            ],
            "problemMatcher": [
                "$rustc"
            ],
            "options": {
                "env": {
                    "RUSTFLAGS": "--cfg=web_sys_unstable_apis"
                }
            }
        },
        {
            "type": "cargo",
            "command": "build",
            "args": [
                "--target",
                "aarch64-linux-android",
            ],
            "problemMatcher": [
                "$rustc"
            ],
            "label": "rust: cargo build-android64",
            "options": {
                "env": {
                    "ANDROID_API": "33",
                    "ANDROID_NDK_ROOT": "${userHome}/Android/Sdk/ndk/25.1.8937393",
                    "TOOLCHAIN": "${userHome}/Android/Sdk/ndk/25.1.8937393/toolchains/llvm/prebuilt/linux-x86_64",
                    "CC": "${userHome}/Android/Sdk/ndk/25.1.8937393/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android33-clang",
                    "CXX": "${userHome}/Android/Sdk/ndk/25.1.8937393/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android33-clang++",
                    "LD": "${userHome}/Android/Sdk/ndk/25.1.8937393/toolchains/llvm/prebuilt/linux-x86_64/bin/ld",
                }
            }
        },
        {
            "type": "cargo",
            "command": "build",
            "args": [
                "--target",
                "armv7-linux-androideabi",
            ],
            "problemMatcher": [
                "$rustc"
            ],
            "label": "rust: cargo build-android32",
            "options": {
                "env": {
                    "ANDROID_API": "33",
                    "ANDROID_NDK_ROOT": "${userHome}/Android/Sdk/ndk/25.1.8937393",
                    "TOOLCHAIN": "${env:ANDROID_NDK_ROOT}/toolchains/llvm/prebuilt/linux-x86_64",
                    "CC": "${env:TOOLCHAIN}/bin/armv7a-linux-androideabi${ANDROID_API}-clang",
                    "CXX": "${env:TOOLCHAIN}/bin/armv7a-linux-androideabi${ANDROID_API}-clang++",
                    "LD": "${env:TOOLCHAIN}/bin/ld",
                }
            }
        },
        {
            "label": "wasm: bindgen",
            "type": "shell",
            "command": "wasm-bindgen --out-dir target/wasm-bundle target/wasm32-unknown-unknown/debug/mdanceio.wasm",
            "dependsOn": [
                "rust: cargo build-wasm"
            ],
            "problemMatcher": []
        },
        {
            "label": "wasm: pack",
            "type": "shell",
            "command": "wasm-pack build mdanceio --out-dir ../target/pkg",
            "problemMatcher": [
                "$rustc"
            ],
            "options": {
                "env": {
                    "RUSTFLAGS": "--cfg=web_sys_unstable_apis"
                }
            }
        },
        {
            "label": "rust: cargo run example winit",
            "type": "cargo",
            "command": "run",
            "args": [
                "--package",
                "mdanceio",
                "--example",
                "winit_app",
                "--",
                "--model",
                "<Model Path>",
                "--texture",
                "<Texture Directory>",
                "--motion",
                "<Motion Path>"
            ],
            "problemMatcher": [
                "$rustc"
            ],
            "options": {
                "env": {}
            }
        },
        {
            "label": "exec: example winit",
            "type": "shell",
            "command": "target/release/examples/winit_app.exe",
            "args": [
                "--model",
                "<Model Path>",
                "--texture",
                "<Texture Directory>",
                "--motion",
                "<Motion Path>"
            ],
            "problemMatcher": [],
            "dependsOn": [
                "rust: cargo build example winit"
            ],
            "options": {
                "env": {}
            }
        },
        {
            "label": "npm: start - mdance-demo",
            "type": "npm",
            "script": "start",
            "path": "mdance-demo",
            "problemMatcher": [],
            "dependsOn": [
                "wasm: pack"
            ],
            "detail": "react-app-rewired start"
        },
        {
            "label": "npm: build - mdance-demo",
            "type": "npm",
            "script": "build",
            "path": "mdance-demo",
            "group": "build",
            "problemMatcher": [],
            "dependsOn": [
                "wasm: pack"
            ],
            "detail": "react-app-rewired build"
        }
    ]
}